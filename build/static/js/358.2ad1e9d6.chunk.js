"use strict";(self.webpackChunkaltura_frontend=self.webpackChunkaltura_frontend||[]).push([[358],{358:function(e,t,n){n.r(t),n.d(t,{default:function(){return ne}});var r,i,s=n(3433),c=n(4165),o=n(1413),a=n(5861),l=n(9439),x=n(168),u=n(7313),d=n(7829),p=n(4097),f=n(3210),h=n(8733),Z=n(4523),j=n(4264),m=n(991),y=n(304),g=n(2374),v=n(6417),w=(0,p.ZP)("div")((function(e){var t=e.visible;return"\n    display: flex;\n    background-color: rgba(0, 0, 0, 0.9);\n    width: 13vw;\n    z-index:500;\n    flex-direction: column;\n    height: 750px;\n    transition: opacity .4s;\n    opacity: ".concat(t?1:0,"\n")})),C=(0,p.ZP)("p")((function(){return"\n    color: #fff;\n    align-self: center;\n    font-family: Genesis;\n    font-size: 13px;\n"})),F=(0,p.ZP)("div")((function(){return"\n    display:flex;\n"})),b=p.ZP.div((function(){return"\n      color: #fff;\n      font-family: Genesis;\n      font-size: 10px;\n  "})),k=function(e){var t=e.visible,n=void 0===t||t,r=e.setFilter,i=void 0===r?function(){}:r,c=function(e){var t=e.text,n=e.type;i((function(e){return e.some((function(e){return e.text===t}))?e.filter((function(e){return e.text!==t})):[].concat((0,s.Z)(e),[{text:t,type:n}])}))};return(0,v.jsxs)(w,{visible:n,children:[(0,v.jsx)(C,{children:"Collections"}),(0,v.jsx)(y.Z,{setFilter:c,type:"collection",text:"Apes"}),(0,v.jsx)(y.Z,{setFilter:c,type:"collection",text:"Dudes"}),(0,v.jsx)(y.Z,{setFilter:c,type:"collection",text:"Chickens"}),(0,v.jsx)(y.Z,{setFilter:c,type:"collection",text:"Elves"}),(0,v.jsx)(y.Z,{setFilter:c,type:"collection",text:"Happy Blob Squad"}),(0,v.jsx)(y.Z,{setFilter:c,type:"collection",text:"Killer Kitties"}),(0,v.jsx)(y.Z,{setFilter:c,type:"collection",text:"Owls"}),(0,v.jsx)(y.Z,{setFilter:c,type:"collection",text:"Queens"}),(0,v.jsx)(y.Z,{setFilter:c,type:"collection",text:"Vixens"}),(0,v.jsx)(y.Z,{setFilter:c,type:"collection",text:"Squeegee Gwakkas"}),(0,v.jsx)(C,{children:"Card Type"}),(0,v.jsx)(y.Z,{setFilter:c,type:"card",text:"$$"}),(0,v.jsx)(y.Z,{setFilter:c,type:"card",text:"Boss Knocker"}),(0,v.jsx)(y.Z,{setFilter:c,type:"card",text:"Grenade Launcher"}),(0,v.jsx)(y.Z,{setFilter:c,type:"card",text:"Healing"}),(0,v.jsx)(y.Z,{setFilter:c,type:"card",text:"Laser"}),(0,v.jsx)(y.Z,{setFilter:c,type:"card",text:"Revealing"}),(0,v.jsx)(y.Z,{setFilter:c,type:"card",text:"Rocket Launcher"}),(0,v.jsx)(y.Z,{setFilter:c,type:"card",text:"Shielding"}),(0,v.jsx)(y.Z,{setFilter:c,type:"card",text:"Slowing"}),(0,v.jsx)(y.Z,{setFilter:c,type:"card",text:"Sniper"}),(0,v.jsx)(y.Z,{setFilter:c,type:"card",text:"Virus"}),(0,v.jsx)(C,{children:"Special Collection"}),(0,v.jsx)(y.Z,{setFilter:c,type:"especial",text:"Starters"}),(0,v.jsx)(y.Z,{setFilter:c,type:"especial",text:"Christmas"}),(0,v.jsx)(y.Z,{setFilter:c,type:"especial",text:"Founders"}),(0,v.jsx)(y.Z,{setFilter:c,type:"especial",text:"Baddies"}),(0,v.jsx)(C,{children:"Kill Count"}),(0,v.jsxs)(F,{children:[(0,v.jsx)(g.Z,{}),(0,v.jsx)(b,{children:"To"}),(0,v.jsx)(g.Z,{})]})]})},P=n(8305),S=n(1805),z=n(7985),L=n(1171),M=(0,L.Z)((0,v.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle"),T=(0,L.Z)((0,v.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"),A=(0,L.Z)((0,v.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),B=(0,L.Z)((0,v.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),G=n(7131),H=n(6406),E=p.ZP.div((function(){return"\n    position: fixed;\n    left: 0;\n    bottom: 0;\n    z-index: 5000;\n    bottom: 0px;\n    background-color: rgba(0, 0, 0, 0.9);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"})),U=p.ZP.div((function(){return"\n    display: flex;\n    width: 100vw;\n    justify-content: center;\n    align-items: center;\n"})),I=p.ZP.p((function(){return"\n    color: #fff;\n    font-size: 20px;\n"})),K=p.ZP.div((function(){return"\n  background-color: #fff;\n  margin-left: 30px;\n  &:hover{\n    background-color: #02c39a;\n  }\n  &:active{\n    background-color: #000;\n  }\n  cursor: pointer;\n  padding: 0px 40px 0px 40px;\n  transition: background-color 0.5s ease;\n  border-radius: 10px;\n"})),V=p.ZP.p((function(){return"\n    color: #000;\n    cursor: pointer;\n    font-weight: 800;\n"})),O=p.ZP.div((function(e){var t=e.open,n=e.maxHeight;return"\n    display: flex;\n    flex-wrap: wrap;\n    max-width: 80rem;\n    overflow: hidden;\n    transition: height 0.6s ease-out;\n    height:".concat(t?void 0===n?0:n:"0",";\n    ")})),R=p.ZP.img((function(){return"\n    width: 100px;\n    margin: 10px\n"})),_=p.ZP.div((function(){return""})),q=function(e){var t,n=e.cart,r=e.setCart,i=e.setLoading,s=e.getAllCards,o=(0,u.useContext)(H.S),x=o.token,d=o.isLogged,p=(0,u.useState)(!1),f=(0,l.Z)(p,2),h=f[0],Z=f[1],j=(0,u.useState)(null),m=(0,l.Z)(j,2),y=m[0],g=m[1],w=(0,u.useRef)(),C=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(){var t,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),t=n.map((function(e){return e._id})),e.next=4,fetch("".concat(S.I,"/card-users"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)},body:JSON.stringify({cards:t})});case 4:return o=e.sent,e.next=7,o.json();case 7:201===e.sent.statusCode?(r([]),g(!0),s()):g(!1),i(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d&&(0,v.jsxs)(E,{children:[(0,v.jsxs)(U,{children:[!0===y&&(0,v.jsx)(M,{color:"success"}),!1===y&&(0,v.jsx)(T,{color:"error"}),(0,v.jsxs)(G.Z,{onClick:function(){return Z(!h)},children:[!h&&(0,v.jsx)(A,{sx:{color:"#fff"}}),h&&(0,v.jsx)(B,{sx:{color:"#fff"}})]}),(0,v.jsx)(I,{children:"Count: ".concat(n.length)}),(0,v.jsx)(K,{sx:{backgroundColor:"#fff",marginLeft:5},onClick:C,children:(0,v.jsx)(V,{children:"Buy"})})]}),(0,v.jsx)(O,{open:h,ref:w,maxHeight:"".concat(null===w||void 0===w||null===(t=w.current)||void 0===t?void 0:t.scrollHeight,"px"),children:n.map((function(e,t){return(0,v.jsxs)(_,{children:[(0,v.jsx)(G.Z,{sx:{position:"absolute"},onClick:function(){!function(e){r((function(t){return t.filter((function(t){return t.card!==e.card}))}))}(e)},children:(0,v.jsx)(T,{sx:{color:"#fff"}})}),(0,v.jsx)(R,{src:e.card})]},"".concat(t,"-").concat(Math.random(),"-").concat(e.card))}))})]})},D=(0,p.ZP)(d.Z)({width:"100%",zIndex:-1,display:"flex",flexDirection:"row",justifyContent:"space-between"}),N=p.ZP.div((function(){return"\n  margin: 0px 1rem 0px 1rem\n"})),$=(0,p.ZP)(d.Z)({display:"grid",gap:20,gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))!important",marginBottom:"100px"}),J=(0,p.ZP)("p")(r||(r=(0,x.Z)(['\n  color: #ffffff;\n  font-family: "Genesis";\n  font-size: 16px;\n  font-weight: 400;\n  text-align: center;\n  margin: 0px 10px 0px 10px;\n  @media (max-width: 1000px) {\n    font-size: 14px;\n  }\n  @media (max-width: 500px) {\n    font-size: 10px;\n  }\n']))),Q=(0,p.ZP)(d.Z)(i||(i=(0,x.Z)(["\n  width: 200px;\n  height: 48px;\n  position: relative;\n  bottom: 5px;\n  @media (max-width: 1000px) {\n    width: 150px;\n  }\n  @media (max-width: 500px) {\n    width: 100px;\n  }\n"]))),W=(0,p.ZP)(d.Z)((function(){return"\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n    @media (max-width: 1000px) {\n      width: 100%;\n    }\n  "})),X=p.ZP.img((function(){return"\n  width: 20px;\n  @media (max-width: 1000px) {\n    width: 15px;\n  }\n  @media (max-width: 500px) {\n    width: 10px;\n  }\n"})),Y=(0,p.ZP)(d.Z)((function(){return"\n  display: flex;\n  cursor: pointer;\n  &:active{\n    opacity: 0.1\n  }\n"})),ee=(0,p.ZP)(d.Z)((function(){return"\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"})),te=(0,p.ZP)(d.Z)((function(){return"\n    margin-top: 10rem;\n    margin-left: 20rem;\n  "})),ne=function(){var e=(0,u.useContext)(H.S).token,t=(0,u.useState)([]),n=(0,l.Z)(t,2),r=n[0],i=n[1],x=(0,u.useState)(!1),d=(0,l.Z)(x,2),p=d[0],y=d[1],g=(0,u.useState)(!1),w=(0,l.Z)(g,2),C=w[0],F=w[1],b=(0,u.useState)([]),L=(0,l.Z)(b,2),M=L[0],T=L[1],A=(0,u.useState)(!1),B=(0,l.Z)(A,2),G=B[0],E=B[1],U=(0,u.useState)([]),I=(0,l.Z)(U,2),K=I[0],V=I[1],O=function(){var t=(0,a.Z)((0,c.Z)().mark((function t(){var n,r,i,s,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(!0),t.next=3,fetch("".concat(S.I,"/card/all"),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=t.sent,t.next=6,n.json();case 6:if(r=t.sent,e){t.next=11;break}return T(r.card),E(!1),t.abrupt("return");case 11:return t.next=13,fetch("".concat(S.I,"/card-users/my-cards"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});case 13:return i=t.sent,t.next=16,i.json();case 16:s=t.sent,a=r.card.map((function(e){return s.result.cards.some((function(t){return e.card===t.card}))?(0,o.Z)((0,o.Z)({},e),{},{userHas:!0}):(0,o.Z)((0,o.Z)({},e),{},{userHas:!1})})),T(a),E(!1);case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,u.useEffect)((function(){O()}),[e]);var R=(0,u.useMemo)((function(){if(r.length<1)return M;var e=M.filter((function(e){return r.some((function(t){if("card"===t.type)return t.text.toUpperCase()===e.subName.toUpperCase()}))})),t=M.filter((function(e){return r.some((function(t){if("collection"===t.type)return t.text.toUpperCase()===e.name.toUpperCase()}))})),n=M.filter((function(e){return r.some((function(t){if("especial"===t.type)return t.text.toUpperCase()===e.special.toUpperCase()}))})),i=[].concat((0,s.Z)(e),(0,s.Z)(t),(0,s.Z)(n)),c=new Set(i);return(0,s.Z)(c)}),[r,M]);return(0,v.jsx)(f.A,{notFooter:!0,children:(0,v.jsxs)(D,{children:[(0,v.jsx)(k,{visible:p,setFilter:i}),(0,v.jsxs)(N,{children:[(0,v.jsxs)(W,{children:[(0,v.jsxs)(ee,{children:[(0,v.jsxs)(Y,{onClick:function(){return y((function(e){return!e}))},children:[(0,v.jsx)(J,{children:"All Filters"}),(0,v.jsx)(X,{src:j.Z})]}),(0,v.jsx)(Q,{component:"img",src:Z})]}),(0,v.jsxs)(ee,{children:[(0,v.jsx)(J,{children:"Marketplace"}),(0,v.jsx)(Q,{component:"img",src:Z})]}),(0,v.jsxs)(ee,{children:[(0,v.jsxs)(Y,{onClick:function(){return F((function(e){return!e}))},children:[(0,v.jsx)(X,{src:m.Z}),(0,v.jsx)(J,{children:"Lowest Price"})]}),(0,v.jsx)(Q,{component:"img",src:Z})]})]}),G&&(0,v.jsx)(te,{children:(0,v.jsx)(z.Z,{isVisible:G})}),!G&&(0,v.jsx)($,{children:R.map((function(e,t){return(0,v.jsx)(h.Z,{item:(0,o.Z)((0,o.Z)({},e),{},{index:t}),setCart:V,cart:K,isMarketplace:!0},"".concat(t,"-").concat(e.name,"-").concat(Math.random()))}))})]}),(0,v.jsx)(P.Z,{setFilter:i,visible:C,setVisible:F}),(0,v.jsx)(q,{cart:K,setCart:V,setLoading:E,getAllCards:O})]})})}}}]);